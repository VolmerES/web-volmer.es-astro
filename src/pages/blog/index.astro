---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="BLOG | Juan Bautista">
    <header class="fixed top-0 left-0 w-full z-50 transition-all duration-300 backdrop-blur-md bg-dark-bg/50 border-b border-white/5">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <a href="/" class="text-2xl font-bold font-heading tracking-tighter hover:text-neon-cyan transition-colors">
                VOLMER<span class="text-neon-pink">.</span>
            </a>
            
            <nav class="hidden md:flex items-center gap-8">
                <a href="/" class="text-sm font-medium hover:text-neon-cyan transition-colors text-gray-400">INICIO</a>
                <a href="/42" class="text-sm font-medium hover:text-neon-cyan transition-colors text-gray-400">42 MADRID</a>
                <a href="/portfolio" class="text-sm font-medium hover:text-neon-cyan transition-colors text-gray-400">PORTAFOLIO</a>
                <a href="/swipe-gallery-app" class="text-sm font-medium hover:text-neon-cyan transition-colors text-gray-400">SWIPE GALLERY APP</a>
                <a href="/servicios" class="text-sm font-medium hover:text-neon-cyan transition-colors text-gray-400">SERVICIOS</a>
                <a href="/blog" class="text-sm font-medium hover:text-neon-cyan transition-colors text-white">BLOG</a>
                <a href="/#about" class="text-sm font-medium hover:text-neon-cyan transition-colors text-gray-400">SOBRE MÍ</a>
            </nav>

            <a href="/#contact" class="hidden md:inline-flex items-center justify-center px-6 py-2 text-sm font-semibold text-dark-bg bg-neon-cyan hover:bg-white transition-all rounded-full">
                CONTACTAR
            </a>
            
            <button class="md:hidden text-white hover:text-neon-pink">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                </svg>
            </button>
        </div>
    </header>

    <main class="relative pt-32 pb-20 min-h-screen">
        <section class="max-w-7xl mx-auto px-6 mb-16">
            <div class="max-w-3xl">
                <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full border border-neon-cyan/30 bg-neon-cyan/5 text-neon-cyan text-xs font-bold tracking-wider mb-6">
                    <span class="w-2 h-2 rounded-full bg-neon-cyan"></span>
                    IDEAS & THOUGHTS
                </div>
                <h1 class="font-heading text-5xl md:text-7xl font-bold leading-tight mb-8">
                    MI <span class="text-transparent bg-clip-text bg-gradient-to-r from-neon-cyan to-neon-pink">BLOG</span>
                </h1>
                <p class="text-xl text-gray-400 leading-relaxed max-w-2xl">
                    Compartiendo conocimientos sobre desarrollo web, diseño y tecnología.
                </p>
            </div>
        </section>

        <section class="max-w-7xl mx-auto px-6 mb-32">
            {posts.length === 0 ? (
                <div class="text-center py-20 border border-white/10 rounded-2xl bg-[#0a0a0a]">
                    <p class="text-gray-400 text-xl">No hay artículos publicados todavía.</p>
                </div>
            ) : (
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    {posts.map((post) => (
                        <article class="group relative flex flex-col h-full rounded-2xl overflow-hidden bg-[#0a0a0a] border border-white/10 hover:border-neon-pink/50 transition-all duration-500 hover:shadow-[0_0_30px_rgba(255,42,109,0.15)]">
                            <a href={`/blog/${post.slug}/`}>
                                <div class="h-48 bg-gradient-to-br from-gray-900 to-black relative overflow-hidden">
                                    {post.data.heroImage && (
                                        <div class="absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110 opacity-80 group-hover:opacity-100" style={`background-image: url('${post.data.heroImage}');`}></div>
                                    )}
                                    {!post.data.heroImage && (
                                        <div class="absolute inset-0 bg-gray-800 flex items-center justify-center">
                                           <span class="text-gray-600 font-bold text-4xl">BLOG</span>
                                        </div>
                                    )}
                                    <div class="absolute inset-0 bg-gradient-to-t from-[#0a0a0a] to-transparent"></div>
                                    <div class="absolute top-4 left-4 flex gap-2">
                                         <span class="px-2 py-1 text-[10px] font-bold uppercase tracking-wider bg-black/60 backdrop-blur-md border border-white/10 rounded text-white">
                                            {post.data.pubDate.toLocaleDateString('es-ES', { year: 'numeric', month: 'short', day: 'numeric' })}
                                        </span>
                                        <span class="px-2 py-1 text-[10px] font-bold uppercase tracking-wider bg-neon-pink/80 backdrop-blur-md border border-white/10 rounded text-white">
                                            {Math.ceil(post.body.split(/\s+/).length / 200)} min
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="p-6 flex flex-col flex-grow">
                                    <h3 class="text-2xl font-bold font-heading mb-3 group-hover:text-neon-cyan transition-colors">
                                        {post.data.title}
                                    </h3>
                                    <p class="text-sm text-gray-400 mb-4 line-clamp-3 leading-relaxed flex-grow">
                                        {post.data.description}
                                    </p>
                                    <span class="text-neon-cyan text-sm font-bold flex items-center gap-2 mt-auto">
                                        LEER MÁS <span class="group-hover:translate-x-1 transition-transform">→</span>
                                    </span>
                                </div>
                            </a>
                        </article>
                    ))}
                </div>
            )}
        </section>

        <footer class="mt-20 border-t border-white/10 bg-black/40 backdrop-blur-lg">
            <div class="max-w-7xl mx-auto px-6 py-12 flex flex-col md:flex-row justify-between items-center gap-6">
                <div class="text-center md:text-left">
                    <h4 class="text-2xl font-bold font-heading mb-2">VOLMER<span class="text-neon-pink">.</span></h4>
                    <p class="text-gray-500 text-sm">© 2026 Juan Bautista. All rights reserved.</p>
                </div>
                
                <div class="flex gap-6">
                    <a href="https://github.com/VolmerES" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-neon-cyan transition-colors">Github</a>
                    <a href="https://linkedin.com/in/jdelorme" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-neon-cyan transition-colors">LinkedIn</a>
                    <a href="#" class="text-gray-400 hover:text-neon-cyan transition-colors">Twitter</a>
                    <a href="#" class="text-gray-400 hover:text-neon-cyan transition-colors">Email</a>
                </div>
            </div>
        </footer>
    </main>
</Layout>
